function setinjkicks(xpos)
% setinjkicks(xpos)
%
% Sets the strengths in the four injection kickers required
% to make a closed bump in the injection straight for the ideal lattice.
% Default being 0.1 dispersion latttice (?)
%
% xpos - amplitude of the parallel bump used for injection (meters)

global THERING

% read the kicks from file which have been calculated previously
% IjectionKicks - 21x5 matrix col1=xpos (m) col2=kick1 (rad) col3=kick2
% (rad) col4=kick3 (rad) col5=kick4 (rad)
% load injection_kicks.mat InjectionKicks
InjectionKicks = [...
   0.00000000000000   0.00000000000000   0.00000000000000   0.00000000000000   0.00000000000000;
  -0.00100000000000   0.00014800000000  -0.00013052060116  -0.00013000000000   0.00014753369343;
  -0.00200000000000   0.00029600000000  -0.00026035436784  -0.00025900000000   0.00029477130201;
  -0.00300000000000   0.00044400000000  -0.00038949631871  -0.00038900000000   0.00044354400860;
  -0.00400000000000   0.00059000000000  -0.00051621109982  -0.00051500000000   0.00058887355431;
  -0.00500000000000   0.00073600000000  -0.00064224513240  -0.00064100000000   0.00073482774839;
  -0.00600000000000   0.00088100000000  -0.00076673956508  -0.00076600000000   0.00088029536904;
  -0.00700000000000   0.00102500000000  -0.00088970655856  -0.00088900000000   0.00102431889887;
  -0.00800000000000   0.00116800000000  -0.00101115901209  -0.00101000000000   0.00116686986828;
  -0.00900000000000   0.00131000000000  -0.00113111053835  -0.00113000000000   0.00130890487737;
  -0.01000000000000   0.00145200000000  -0.00125041333291  -0.00125000000000   0.00145158784082;
  -0.01100000000000   0.00159200000000  -0.00136740207938  -0.00136600000000   0.00159058670747;
  -0.01200000000000   0.00173200000000  -0.00148376374419  -0.00148300000000   0.00173122185276;
  -0.01300000000000   0.00187200000000  -0.00159950129343  -0.00159900000000   0.00187148382025;
  -0.01400000000000   0.00201000000000  -0.00171297835899  -0.00171200000000   0.00200898217080;
  -0.01500000000000   0.00214800000000  -0.00182585721434  -0.00182500000000   0.00214709907931;
  -0.01600000000000   0.00228500000000  -0.00193733166414  -0.00193600000000   0.00228358641690;
  -0.01700000000000   0.00242200000000  -0.00204822792023  -0.00204700000000   0.00242068362261;
  -0.01800000000000   0.00255800000000  -0.00215774973517  -0.00215700000000   0.00255718843470;
  -0.01900000000000   0.00269300000000  -0.00226591717537  -0.00226500000000   0.00269199772944;
  -0.02000000000000   0.00282700000000  -0.00237275076547  -0.00237200000000   0.00282617190946;
  -0.02100000000000   0.00296100000000  -0.00247906292307  -0.00247800000000   0.00295981679006;
  -0.02200000000000   0.00309500000000  -0.00258486374573  -0.00258400000000   0.00309402973700;
];
% find the kicks in InjectionKicks table
row = find(InjectionKicks==xpos);

if (isempty(row))
    disp('xpos not in lookup table (-22e-3 to -2e-3 in steps of 1e-3 m)')
    eval('help setinjkicks')
    return
end

% get the kick data for xpos
for i = 1:4
    new_kicks(i) = InjectionKicks(row(1,1),i+1);
end

setsp('KICK', new_kicks');

